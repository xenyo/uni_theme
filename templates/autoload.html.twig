{% spaceless %}
  {# 1. Compile suggestions #}
  {% set suggestions = {} %}
  {% for suggestion in [theme_hook_original]|merge(theme_hook_suggestions) %}
    {% set suggestion = suggestion|replace({'_': '-'})|clean_class|trim('-') %}
    {% set suggestions = suggestions|merge({ (suggestion): 0 }) %}
  {% endfor %}
  {% set suggestions = suggestions|keys %}

  {# 2. Attach libraries based on suggestions #}
  {% for extension in extensions %}
    {% for suggestion in suggestions %}
      {{ attach_library("#{extension}/#{suggestion}") }}
    {% endfor %}
  {% endfor %}

  {# 3. Add classes to attributes based on suggestions #}
  {% set classes = suggestions|merge(attributes.getClass() ?? []) %}
  {% set attributes = attributes.setAttribute('class', classes) %}
{% endspaceless %}